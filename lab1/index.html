<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Цветовые модели - RGB, CMYK, HLS</title>
    <style>
        :root {
            --primary-color: #3498db;
            --warning-color: #e74c3c;
            --bg-color: #f9f9f9;
            --card-bg: #fff;
            --text-color: #333;
            --border-color: #ddd;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1, h2, h3 {
            color: var(--primary-color);
        }
        
        .color-display {
            width: 100%;
            height: 150px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 18px;
            color: white;
            text-shadow: 0 0 3px rgba(0, 0, 0, 0.7);
            transition: background-color 0.3s;
        }
        
        .models-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .model-card {
            flex: 1;
            min-width: 300px;
            background-color: var(--card-bg);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border-color);
        }
        
        .component {
            margin-bottom: 15px;
        }
        
        .component label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        input[type="range"] {
            flex: 1;
            height: 5px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
        }
        
        input[type="number"] {
            width: 60px;
            padding: 5px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            text-align: center;
        }
        
        .warning {
            color: var(--warning-color);
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        .color-picker-container {
            margin: 20px 0;
        }
        
        input[type="color"] {
            width: 100%;
            height: 40px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
        }
        
        @media (max-width: 768px) {
            .models-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Цветовые модели: RGB, CMYK, HLS</h1>
        <p>Измените цвет с помощью ползунков, числовых полей или выберите из палитры.</p>
        
        <div class="color-display" id="colorDisplay">Текущий цвет</div>
        
        <div class="color-picker-container">
            <label for="colorPicker">Выбор цвета из палитры:</label>
            <input type="color" id="colorPicker" value="#ff0000">
        </div>
        
        <div class="models-container">
            <!-- RGB Model -->
            <div class="model-card">
                <h2>RGB модель</h2>
                <div class="component">
                    <label for="rSlider">R (Красный: 0-255)</label>
                    <div class="slider-container">
                        <input type="range" id="rSlider" min="0" max="255" value="255">
                        <input type="number" id="rInput" min="0" max="255" value="255">
                    </div>
                </div>
                <div class="component">
                    <label for="gSlider">G (Зеленый: 0-255)</label>
                    <div class="slider-container">
                        <input type="range" id="gSlider" min="0" max="255" value="0">
                        <input type="number" id="gInput" min="0" max="255" value="0">
                    </div>
                </div>
                <div class="component">
                    <label for="bSlider">B (Синий: 0-255)</label>
                    <div class="slider-container">
                        <input type="range" id="bSlider" min="0" max="255" value="0">
                        <input type="number" id="bInput" min="0" max="255" value="0">
                    </div>
                </div>
                <div class="warning" id="rgbWarning"></div>
            </div>
            
            <!-- CMYK Model -->
            <div class="model-card">
                <h2>CMYK модель</h2>
                <div class="component">
                    <label for="cSlider">C (Голубой: 0-100%)</label>
                    <div class="slider-container">
                        <input type="range" id="cSlider" min="0" max="100" value="0">
                        <input type="number" id="cInput" min="0" max="100" value="0">
                    </div>
                </div>
                <div class="component">
                    <label for="mSlider">M (Пурпурный: 0-100%)</label>
                    <div class="slider-container">
                        <input type="range" id="mSlider" min="0" max="100" value="100">
                        <input type="number" id="mInput" min="0" max="100" value="100">
                    </div>
                </div>
                <div class="component">
                    <label for="ySlider">Y (Желтый: 0-100%)</label>
                    <div class="slider-container">
                        <input type="range" id="ySlider" min="0" max="100" value="100">
                        <input type="number" id="yInput" min="0" max="100" value="100">
                    </div>
                </div>
                <div class="component">
                    <label for="kSlider">K (Черный: 0-100%)</label>
                    <div class="slider-container">
                        <input type="range" id="kSlider" min="0" max="100" value="0">
                        <input type="number" id="kInput" min="0" max="100" value="0">
                    </div>
                </div>
                <div class="warning" id="cmykWarning"></div>
            </div>
            
            
            <!-- HLS Model (HSL naming in code) -->
            <div class="model-card">
                <h2>HLS модель</h2>
                <div class="component">
                    <label for="hhSlider">H (Оттенок: 0-360°)</label>
                    <div class="slider-container">
                        <input type="range" id="hhSlider" min="0" max="360" value="0">
                        <input type="number" id="hhInput" min="0" max="360" value="0">
                    </div>
                </div>
                <div class="component">
                    <label for="hsSlider">S (Насыщенность: 0-100%)</label>
                    <div class="slider-container">
                        <input type="range" id="hsSlider" min="0" max="100" value="100">
                        <input type="number" id="hsInput" min="0" max="100" value="100">
                    </div>
                </div>
                <div class="component">
                    <label for="hlSlider">L (Светлота: 0-100%)</label>
                    <div class="slider-container">
                        <input type="range" id="hlSlider" min="0" max="100" value="50">
                        <input type="number" id="hlInput" min="0" max="100" value="50">
                    </div>
                </div>
                <div class="warning" id="hslWarning"></div>
            </div>
        </div>
    </div>

    <script>
        // Получаем элементы DOM
        const colorDisplay = document.getElementById('colorDisplay');
        const colorPicker = document.getElementById('colorPicker');
        
        // RGB элементы
        const rSlider = document.getElementById('rSlider');
        const gSlider = document.getElementById('gSlider');
        const bSlider = document.getElementById('bSlider');
        const rInput = document.getElementById('rInput');
        const gInput = document.getElementById('gInput');
        const bInput = document.getElementById('bInput');
        const rgbWarning = document.getElementById('rgbWarning');
        
        // CMYK элементы
        const cSlider = document.getElementById('cSlider');
        const mSlider = document.getElementById('mSlider');
        const ySlider = document.getElementById('ySlider');
        const kSlider = document.getElementById('kSlider');
        const cInput = document.getElementById('cInput');
        const mInput = document.getElementById('mInput');
        const yInput = document.getElementById('yInput');
        const kInput = document.getElementById('kInput');
        const cmykWarning = document.getElementById('cmykWarning');
        
        // HSL элементы
        const hhSlider = document.getElementById('hhSlider');
        const hsSlider = document.getElementById('hsSlider');
        const hlSlider = document.getElementById('hlSlider');
        const hhInput = document.getElementById('hhInput');
        const hsInput = document.getElementById('hsInput');
        const hlInput = document.getElementById('hlInput');
        const hslWarning = document.getElementById('hslWarning');
        
        // Текущий цвет в RGB (по умолчанию красный)
        let currentColor = { r: 255, g: 0, b: 0 };
        
        // Флаги для предотвращения рекурсивных обновлений
        let updating = false;
        
        // Инициализация приложения
        function init() {
            updateColorDisplay();
            setupEventListeners();
            updateAllModelsFromRGB();
        }
        
        // Настройка обработчиков событий
        function setupEventListeners() {
            // RGB слушатели
            rSlider.addEventListener('input', () => updateFromRGB('slider'));
            gSlider.addEventListener('input', () => updateFromRGB('slider'));
            bSlider.addEventListener('input', () => updateFromRGB('slider'));
            rInput.addEventListener('input', () => updateFromRGB('input'));
            gInput.addEventListener('input', () => updateFromRGB('input'));
            bInput.addEventListener('input', () => updateFromRGB('input'));
            
            // CMYK слушатели
            cSlider.addEventListener('input', () => updateFromCMYK('slider'));
            mSlider.addEventListener('input', () => updateFromCMYK('slider'));
            ySlider.addEventListener('input', () => updateFromCMYK('slider'));
            kSlider.addEventListener('input', () => updateFromCMYK('slider'));
            cInput.addEventListener('input', () => updateFromCMYK('input'));
            mInput.addEventListener('input', () => updateFromCMYK('input'));
            yInput.addEventListener('input', () => updateFromCMYK('input'));
            kInput.addEventListener('input', () => updateFromCMYK('input'));
            
            // HSL слушатели
            hhSlider.addEventListener('input', () => updateFromHSL('slider'));
            hsSlider.addEventListener('input', () => updateFromHSL('slider'));
            hlSlider.addEventListener('input', () => updateFromHSL('slider'));
            hhInput.addEventListener('input', () => updateFromHSL('input'));
            hsInput.addEventListener('input', () => updateFromHSL('input'));
            hlInput.addEventListener('input', () => updateFromHSL('input'));
            
            // Слушатель выбора цвета
            colorPicker.addEventListener('input', updateFromColorPicker);
        }
        
        // Обновление из RGB модели
        function updateFromRGB(source) {
            if (updating) return;
            updating = true;
            
            // Получаем значения из полей ввода
            let r = parseInt(rInput.value);
            let g = parseInt(gInput.value);
            let b = parseInt(bInput.value);
            
            // Проверяем границы
            r = clamp(r, 0, 255);
            g = clamp(g, 0, 255);
            b = clamp(b, 0, 255);
            
            // Обновляем слайдеры, если источник - поле ввода
            if (source === 'input') {
                rSlider.value = r;
                gSlider.value = g;
                bSlider.value = b;
            } else {
                // Иначе обновляем поля ввода из слайдеров
                r = parseInt(rSlider.value);
                g = parseInt(gSlider.value);
                b = parseInt(bSlider.value);
                
                rInput.value = r;
                gInput.value = g;
                bInput.value = b;
            }
            
            // Обновляем текущий цвет
            currentColor = { r, g, b };
            
            // Обновляем другие модели
            updateAllModelsFromRGB();
            
            updating = false;
        }
        
        // Обновление из CMYK модели
        function updateFromCMYK(source) {
            if (updating) return;
            updating = true;
            
            // Получаем значения
            let c = parseFloat(cInput.value);
            let m = parseFloat(mInput.value);
            let y = parseFloat(yInput.value);
            let k = parseFloat(kInput.value);
            
            // Проверяем границы
            c = clamp(c, 0, 100);
            m = clamp(m, 0, 100);
            y = clamp(y, 0, 100);
            k = clamp(k, 0, 100);
            
            // Синхронизируем элементы ввода
            if (source === 'input') {
                cSlider.value = c;
                mSlider.value = m;
                ySlider.value = y;
                kSlider.value = k;
            } else {
                c = parseFloat(cSlider.value);
                m = parseFloat(mSlider.value);
                y = parseFloat(ySlider.value);
                k = parseFloat(kSlider.value);
                
                cInput.value = c;
                mInput.value = m;
                yInput.value = y;
                kInput.value = k;
            }
            
            // Преобразуем CMYK в RGB
            const rgb = cmykToRgb(c, m, y, k);
            
            // Обновляем текущий цвет
            currentColor = rgb;
            
            // Обновляем все модели
            updateAllModelsFromRGB();
            
            updating = false;
        }
        
        // Обновление из HSL модели
        function updateFromHSL(source) {
            if (updating) return;
            updating = true;
            
            let h = parseFloat(hhInput.value);
            let s = parseFloat(hsInput.value);
            let l = parseFloat(hlInput.value);
            
            h = clamp(h, 0, 360);
            s = clamp(s, 0, 100);
            l = clamp(l, 0, 100);
            
            if (source === 'input') {
                hhSlider.value = h;
                hsSlider.value = s;
                hlSlider.value = l;
            } else {
                h = parseFloat(hhSlider.value);
                s = parseFloat(hsSlider.value);
                l = parseFloat(hlSlider.value);
                
                hhInput.value = h;
                hsInput.value = s;
                hlInput.value = l;
            }
            
            const rgb = hslToRgb(h, s, l);
            currentColor = rgb;
            updateAllModelsFromRGB();
            
            updating = false;
        }
        
        // Обновление из палитры выбора цвета
        function updateFromColorPicker() {
            if (updating) return;
            updating = true;
            
            // Получаем hex значение и преобразуем в RGB
            const hex = colorPicker.value;
            const rgb = hexToRgb(hex);
            
            // Обновляем текущий цвет
            currentColor = rgb;
            
            // Обновляем все модели
            updateAllModelsFromRGB();
            
            updating = false;
        }
        
        // Обновление всех моделей на основе текущего RGB цвета
        function updateAllModelsFromRGB() {
            // Обновляем RGB элементы
            rSlider.value = currentColor.r;
            gSlider.value = currentColor.g;
            bSlider.value = currentColor.b;
            rInput.value = currentColor.r;
            gInput.value = currentColor.g;
            bInput.value = currentColor.b;
            
            // Обновляем CMYK
            const cmyk = rgbToCmyk(currentColor.r, currentColor.g, currentColor.b);
            cSlider.value = cmyk.c;
            mSlider.value = cmyk.m;
            ySlider.value = cmyk.y;
            kSlider.value = cmyk.k;
            cInput.value = cmyk.c;
            mInput.value = cmyk.m;
            yInput.value = cmyk.y;
            kInput.value = cmyk.k;
            
            // Обновляем HSL
            const hsl = rgbToHsl(currentColor.r, currentColor.g, currentColor.b);
            hhSlider.value = hsl.h;
            hsSlider.value = hsl.s;
            hlSlider.value = hsl.l;
            hhInput.value = hsl.h;
            hsInput.value = hsl.s;
            hlInput.value = hsl.l;
            
            // Обновляем цвет палитры
            const hex = rgbToHex(currentColor.r, currentColor.g, currentColor.b);
            colorPicker.value = hex;
            
            // Обновляем отображение цвета
            updateColorDisplay();
        }
        
        // Обновление отображения цвета
        function updateColorDisplay() {
            const hex = rgbToHex(currentColor.r, currentColor.g, currentColor.b);
            colorDisplay.style.backgroundColor = hex;
            
            // Определяем, использовать ли темный или светлый текст для контраста
            const brightness = (currentColor.r * 299 + currentColor.g * 587 + currentColor.b * 114) / 1000;
            colorDisplay.style.color = brightness > 128 ? 'black' : 'white';
            
            colorDisplay.textContent = `RGB: ${currentColor.r}, ${currentColor.g}, ${currentColor.b} | HEX: ${hex}`;
        }
        
        // Преобразование RGB в CMYK
        function rgbToCmyk(r, g, b) {
            r = r / 255;
            g = g / 255;
            b = b / 255;
            
            const k = 1 - Math.max(r, g, b);
            
            if (k === 1) {
                return { c: 0, m: 0, y: 0, k: 100 };
            }
            
            const c = (1 - r - k) / (1 - k);
            const m = (1 - g - k) / (1 - k);
            const y = (1 - b - k) / (1 - k);
            
            return {
                c: Math.round(c * 100),
                m: Math.round(m * 100),
                y: Math.round(y * 100),
                k: Math.round(k * 100)
            };
        }
        
        // Преобразование CMYK в RGB
        function cmykToRgb(c, m, y, k) {
            c = c / 100;
            m = m / 100;
            y = y / 100;
            k = k / 100;
            
            const r = 255 * (1 - c) * (1 - k);
            const g = 255 * (1 - m) * (1 - k);
            const b = 255 * (1 - y) * (1 - k);
            
            return {
                r: Math.round(r),
                g: Math.round(g),
                b: Math.round(b)
            };
        }
        
        
        // Преобразование RGB в HEX
        function rgbToHex(r, g, b) {
            return '#' + 
                ((1 << 24) + (r << 16) + (g << 8) + b)
                .toString(16)
                .slice(1)
                .toUpperCase();
        }
        
        // Преобразование RGB в HSL
        function rgbToHsl(r, g, b) {
            r = r / 255;
            g = g / 255;
            b = b / 255;
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h = 0, s = 0;
            const l = (max + min) / 2;
            const d = max - min;
            if (d !== 0) {
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }
            return {
                h: Math.round(h * 360),
                s: Math.round(s * 100),
                l: Math.round(l * 100)
            };
        }
        
        // Преобразование HSL в RGB
        function hslToRgb(h, s, l) {
            h = h / 360;
            s = s / 100;
            l = l / 100;
            let r, g, b;
            if (s === 0) {
                r = g = b = l; // achromatic
            } else {
                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                };
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }
            return {
                r: Math.round(r * 255),
                g: Math.round(g * 255),
                b: Math.round(b * 255)
            };
        }
        
        // Преобразование HEX в RGB
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : { r: 0, g: 0, b: 0 };
        }
        
        // Ограничение значения в заданных пределах
        function clamp(value, min, max) {
            return Math.min(Math.max(value, min), max);
        }
        
        // Инициализация при загрузке
        window.addEventListener('load', init);
    </script>
</body>
</html>